---
layout: post
toc: true
title: "백준 11062번 카드 게임"
categories: BOJ
tags: [백준, BOJ, python, pypy3, 다익스트라, heapq, 스터디]
---

## 문제
근우와 명우는 재미있는 카드 게임을 하고 있다. N개의 카드가 일렬로 놓여 있다. 각 카드에는 점수가 적혀있다. 근우부터 시작하여 번갈아가면서 턴이 진행되는데 한 턴에는 가장 왼쪽에 있는 카드나 가장 오른쪽에 있는 카드를 가져갈 수 있다. 카드가 더 이상 남아있지 않을 때까지 턴은 반복된다. 게임의 점수는 자신이 가져간 카드에 적힌 수의 합이다.

근우와 명우는 서로 자신의 점수를 가장 높이기 위해 최선의 전략으로 게임에 임한다. 놓여있는 카드의 개수 N과 카드가 놓여있는 상태가 주어졌을 때 근우가 얻는 점수를 구하는 프로그램을 작성하시오.

예를 들어 카드가 [4, 3, 1, 2]로 놓여있다고 하자. 근우는 처음에 4가 적힌 카드를 가져가고, 명우는 3이 적힌 카드를 가져간다. 그리고 근우는 2가 적힌 카드를 가져가고, 명우는 마지막으로 1이 적힌 카드를 가져간다. 이때 근우와 명우는 최선의 전략으로 임했으며, 근우가 얻는 점수는 6이다.

[www.acmicpc.net/problem/11062](https://www.acmicpc.net/problem/11062)

* 입력

입력의 첫 줄에는 테스트케이스의 수 T가 주어진다.

각 테스트케이스 마다 첫 줄에는 카드의 개수 N(1 ≤ N ≤ 1,000)이 주어진다. 두 번째 줄에는 N개의 자연수가 공백으로 구분되어 주어지는데, i번째로 주어지는 수는 왼쪽에서 i번째에 놓인 카드에 적힌 수를 의미한다. 카드에 적혀있는 수는 1이상 10,000이하다.

* 출력

각 테스트케이스마다 근우와 명우가 최선의 전략으로 임할 때 근우가 얻게되는 점수를 줄로 구분하여 출력한다.


## 최종 코드

이게 dp 문제라니 ㅠㅠ. 이게 dp라는 걸 문제만 보고 어떻게 파악할까? 어렵다.

이 문제를 해결하기 위해서는 근우의 차례일 때와 명우의 차례일 때를 나누어서 생각해야 한다.

1. 근우 차례
왼쪽 카드를 선택하고 나머지 카드들에서 얻는 점수, 오른쪽 카드를 선택하고 나머지 카드들에서 얻는 점수 중 **최댓값**
2. 명우 차례
왼쪽 카드를 제외한 나머지 카드들에서 얻는 점수, 오른쪽 카드를 제외한 나머지 카드들에서 얻는 점수 중 **최솟값**

근우가 차례를 먼저 시작하는데 자신의 점수가 최대가 되도록 카드를 가져가려면, 반대로 명우는 점수가 최소가 되는 카드를 가져가야 한다.

따라서 근우는 최댓값, 명우는 최솟값을 가지도록 선택한다.

유의해야할 점은 점수 계산은 근우만 한다는 것이다. 그래서 dp를 구할 때에도 근우 차례에만 현재 카드 점수를 더해주어야 하고, 마지막 카드가 한 장 남았을 때에도 근우의 차례에만 카드 점수를 return 해주어야 한다.

아 참고로 python 3로는 시간 초과가 떠서 pypy3로 제출했다. python 3로 통과하는 방법은 없을까 궁금한데 모르겠다.

```python
import sys

def check(turn, s, e):
    # 카드가 한 장 남은 경우
    if s == e:
        # 근우의 차례에만 카드 점수 반환
        if turn == 0:
            return card[s]
        else:
            return 0
    # 이미 계산한 값인 경우 바로 값 반환
    if dp[turn][s][e] != 0:
        return dp[turn][s][e]

    # 근우의 차례: 최댓값 계산
    if turn == 0:
        dp[turn][s][e] = max(check(1, s+1, e) + card[s], check(1, s, e-1) + card[e])
    # 명우의 차례: 최솟값 계산
    else:
        dp[turn][s][e] = min(check(0, s+1, e), check(0, s, e-1))

    return dp[turn][s][e]

t = int(sys.stdin.readline())
while t:
    n = int(sys.stdin.readline())
    card = list(map(int, sys.stdin.readline().split()))
    dp = [[[0]*n for _ in range(n)] for _ in range(2)]
    print(check(0, 0, n-1))
    t -= 1
```

## 참고 사이트

- [백준 11062/Python] 카드 게임 [yjs03057.tistory.com/16](https://yjs03057.tistory.com/16)
